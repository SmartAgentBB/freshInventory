
#### **1. 앱 개요 (App Overview)**

Flask를 사용한 웹 애플리케이션을 만들고싶습니다. 

**Tailwind CSS**를 사용하여 모바일 반응형 'AI 식재료 관리 웹 앱' 프로토타입을 개발합니다. 사용자가 식재료 사진을 등록하면 Gemini AI가 이미지를 분석하여 자동으로 식재료 목록을 생성하고, 권장 소비기한을 계산하여 효과적인 재고 관리를 돕는 애플리케이션입니다

#### **2. 데이터 정보**

**3.1. `inventory` 테이블**

사용자의 개별 식재료 아이템을 저장하는 테이블입니다.

| 필드명        | 데이터 타입 | 설명                                                                              |
| ---------- | ------ | ------------------------------------------------------------------------------- |
| `id`       | Number | Primary Key (auto-increment)                                                    |
| `name`     | String | 식재료 이름 (예: "양파", "감자", "양배추")                                                   |
| `image`    |        | 32x32 사이즈의 식재료 썸네일 이미지 데이터                                                      |
| `quantity` | Number | 식재료 수량 (오이, 감자, 양파처럼 셀 수 있는 종류는 개수를 세고, 콩나물이나 시금치처럼 갯수를 세기 어려운 종류는 봉투 단위로 센다. ) |
| `remains`  | Number | 남은 양 (1.0: 100%, 0.5: 50%, 0: 소진)                                               |
| `addedAt`  | Date   | 등록된 날짜 및 시간 객체                                                                  |

#### **3. 화면 및 기능 명세 (Screen & Feature Specifications)**

**4.1. inventory 테이블에서 remains 필드 값이 0보다 큰 식재료 목록을 가져와 보여줍니다. 목록은 addedAt 기준으로 최신순 정렬합니다.
    
- **UI 구성 (리스트의 각 항목):**
    - **`image`**: 32x32 사이즈의 식재료 썸네일 이미지 
    - **`name`**: 식재료 이름
    - **`quantity`** :  식재료 개수
    - **`addedAt`** : 등록한 날짜 M월 d일 포맷으로 표시
    - **`remains`**: 남은 양. `<progress>` 태그나 스타일링된 `<div>`를 사용하여 시각적으로 표시합니다.
            
- **컴포넌트:**
    - 화면 우측 하단에 등록 화면으로 이동하는 `+` 아이콘 버튼이 있습니다.

**4.2. 등록 플로우 1: 사진 선택 및 AI 분석**

- **기능:** 메인 화면의 등록 버튼을 누르면, `<input type="file" accept="image/*">`을 사용하여 사용자가 이미지 파일을 선택하게 합니다.
    
- **AI 분석 요청:**
    
    1. 사용자가 이미지를 제공하면, 이미지의 가로 세로 중 큰 쪽의 크기가 480px을 넘는 경우,  **클라이언트(브라우저)에서 이미지의 가로 또는 세로가 480px을 넘지 않도록 비율을 유지하며 리사이즈합니다.** 이는 API 토큰 사용량을 최적화하기 위함입니다.
        
    2. **리사이즈된 이미지**를 Gemini AI에 전송하여 분석을 요청합니다.
        
    3. **Gemini 역할:**
        - 사진 속의 모든 식재료를 개별적으로 식별하고, 각 식재료의 이름(`name`), 수량(`quantity`), 그리고 이미지를 잘라낼 수 있는 경계 상자 좌표(`boundingBox`)를 추정하여 JSON 배열 형식으로 반환하도록 요청합니다. 좌표는 `[x, y, width, height]` 형식이어야 합니다. 경계 상자는 정사각형 모양입니다.

**4.3. 등록 플로우 2: AI 분석 결과 확인 및 수정**

- **기능:** AI 분석이 완료되면, 반환된 JSON 배열을 순회하며 각 항목의 `boundingBox` 좌표를 사용해 **리사이즈된 원본 이미지로부터** 썸네일을 직접 잘라냅니다. 이 결과를 새로운 페이지 또는 모달(Modal) 창에 목록 형태로 표시합니다.
    
- **UI 구성 (리스트의 각 항목):**
    
    - **앱에서 직접 잘라낸** 썸네일 `image`
    - AI가 추정한 `name` (수정 가능한 `<input type="text">`)
    - AI가 추정한 `quantity` (수량을 조절할 수 있는 `-` / `+` 버튼 포함)
    - 해당 항목을 목록에서 제거하는 `삭제` 버튼

예시:
오이 3개, 양파 2개, 두부 2개가 있는 이미지를 업로드 하면 
아래와 같은 목록을 만듭니다. 
image | name | quantity
썸네일 이미지 | 오이 | - 3 +
썸네일 이미지 | 양파 | - 2 +
썸네일 이미지 | 두부 | - 1 +

AI의 분석이 틀릴 수 있으므로, 이름과 수량은 사용자가 수정 가능해야 합니다. 

- **컴포넌트:**
    - 화면 하단에 최종적으로 인벤토리에 저장하는 `등록하기` 버튼이 있습니다.

**4.4. 등록 플로우 3: 최종 저장 로직**

- **기능:** 사용자가 `등록하기` 버튼을 누르면, 수정된 목록의 각 항목에 대해 아래 로직을 수행합니다.
                
    `name`, `quantity`, 그리고 **앱에서 직접 잘라낸** `image` 데이터를 `inventory` 스토어에 새로운 데이터로 저장합니다. 이때 `remains`는 `1.0`으로, `addedAt`은 현재 시간으로 설정합니다.
    
#### **5. 추가 요구사항**

- 모든 화면은 **Tailwind CSS**를 사용하여 모바일 우선의 반응형 UI로 구성합니다.
    
- 데이터를 불러오거나 AI가 분석하는 동안에는 로딩 스피너(spinner)를 표시하여 사용자 경험을 향상시킵니다.
    
- AI API 호출 오류 등에 대한 예외 처리를 구현하고, 사용자에게 간단한 메시지로 상황을 알려주세요.